you are confusing me tell me exactly what u want me to paste in all  areas this is the front end please only send me exactly what i would copy and paste ‚úÖ Front-end change (so Michelin uses the citywide function)

In your search() function, right after you set:

state.qualityFilter = document.getElementById('quality').value;

Add this Michelin-only branch and return (copy/paste exactly):

  // ‚úÖ MICHELIN MODE (CITYWIDE)
  if (state.qualityFilter === 'michelin') {
    document.getElementById('warnings').innerHTML = '';
    document.getElementById('list').innerHTML =
      '<div style="text-align:center;padding:40px">üèÖ Loading Michelin (ALL NYC)...</div>';

    const resp = await fetch('/.netlify/functions/search-michelin', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ location }),
      signal: searchAbortController.signal
    });

    const data = await resp.json();

    if (data?.error) {
      document.getElementById('warnings').innerHTML = `
        <div style="background:#fee2e2;border:2px solid #fca5a5;padding:12px;border-radius:8px;margin-bottom:16px;color:#991b1b;font-weight:800">
          ‚ùå ${data.error}
        </div>
      `;
      document.getElementById('list').innerHTML =
        `<div style="text-align:center;padding:40px">No results (see error above)</div>`;
      return;
    }

    allRestaurants = Array.isArray(data.michelin) ? data.michelin.map(r => ({
      ...r,
      walkMinutes: r.walkMinEstimate,
      driveMinutes: r.driveMinEstimate,
      transitMinutes: r.transitMinEstimate
    })) : [];

    document.getElementById('warnings').innerHTML = `
      <div style="background:#e0f2fe;border:2px solid #7dd3fc;padding:12px;border-radius:8px;margin-bottom:16px;color:#075985">
        üìç ${data.confirmedAddress || location}
      </div>
      <div style="background:#d1fae5;border:2px solid #6ee7b7;padding:12px;border-radius:8px;margin-bottom:16px;color:#065f46;font-weight:800">
        ‚úì Showing ${allRestaurants.length} Michelin restaurants (ALL NYC)
      </div>
    `;

    sortResults();
    return;
  }

That‚Äôs it.

‚úÖ One more important UI fix: Maps button for Michelin rows without place_id

Right now your Maps button depends on place_id. If your Michelin JSON doesn‚Äôt have place_id, the button breaks.

Replace your maps button line:

<button onclick="window.open('https://www.google.com/maps/search/?api=1&query=Google&query_place_id=${r.place_id}','_blank')"

with this (works with place_id OR lat/lng):

<button onclick="window.open(
  (${r.place_id ? `'https://www.google.com/maps/search/?api=1&query_place_id=${r.place_id}'` :
  (r.geometry?.location ? `'https://www.google.com/maps/search/?api=1&query=${encodeURIComponent((r.name||'') + ' ' + r.geometry.location.lat + ',' + r.geometry.location.lng)}'` :
  `'https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(r.name||'')}'`)
  }),
  '_blank'
)"

(Yes it‚Äôs ugly, but it‚Äôs bulletproof.)

‚úÖ What you should see after deploy

In Netlify Functions list you should see search-michelin.

In Netlify logs you should see:

[Michelin] Loaded entries: 41 (or whatever count your JSON has)

[Michelin] Returning 41 entries (citywide)

And your browser console 404 will be gone.

Quick question (only to avoid wasted work)

Do you want Michelin results to show only Michelin (what we did), or Michelin plus also show nearby 4.6/4.4 results under it?

If you want both, I‚Äôll tweak the UI to show Michelin section first + ‚ÄúNearby top rated‚Äù section under it.
